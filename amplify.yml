version: 1
frontend:
  phases:
    preBuild:
      commands:
        # 1. This command installs the pnpm tool itself in the build environment.
        - npm install -g pnpm 
        # 2. This command uses pnpm to install your project's dependencies correctly.
        - pnpm install --frozen-lockfile 
    build:
      commands:
        # 3. This command uses pnpm to build your Next.js app.
        - pnpm run build
  artifacts:
    # ... (Tells Amplify where to find the build output)
